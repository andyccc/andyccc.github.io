---
title: æ·±å…¥æµ…å‡ºè°ˆç®—æ³•
date: 2018-06-11 14:44:43
tags: æ•°æ®ç»“æ„å’Œç®—æ³•
---

### å†™åœ¨å‰é¢çš„è¯

ç®—æ³•æ— ç”¨è®ºå’Œç®—æ³•é‡è¦è®ºä¸€ç›´ä»¥æ¥éƒ½æ˜¯ç¨‹åºå‘˜ç•Œäº‰è®ºä¸ä¼‘çš„è¯é¢˜ï¼Œè‡³ä»Šä¹Ÿæ²¡äººèƒ½ç»™å‡ºä¸€ä¸ªæ˜ç¡®çš„å®šè®ºã€‚ä¸ªäººè®¤ä¸ºï¼Œè§£ç®—æ³•æˆ–è€…è¯´åˆ·é¢˜çš„ç›®çš„ä¸åœ¨äºæˆ‘ä»¬åœ¨å·¥ä½œä¸­ä½¿ç”¨è¿™ä¸ªç®—æ³•ï¼Œè€Œåœ¨äºè§£é¢˜çš„è¿‡ç¨‹èƒ½é”»ç‚¼æˆ‘ä»¬è§£å†³é—®é¢˜çš„æ€ç»´å’Œæ‰©å±•æ€ç»´ã€‚è¿™ç§æ€ç»´å¯ä»¥ç»™æˆ‘å¸¦æ¥çš„æ˜¯ï¼šä¸€ä¸ªå¤æ‚çš„æµç¨‹å¯ä»¥æƒ³åˆ°å¤šç§è§£å†³æ–¹æ³•ï¼Œå¹¶ä¸”ä»ä¸­é€‰æ‹©æœ€ä¼˜çš„è§£æ³•ï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€ç§è§£æ³•è¿˜æ˜¯ååˆ†åƒåœ¾çš„è§£æ³•ã€‚å¦å¤–ï¼Œä¸€ä¸ªç®€å•çš„æ•°æ®ç»“æ„çš„ä½¿ç”¨å¯èƒ½ä¼šå¤§å¤§çš„ç®€åŒ–æˆ‘ä»¬ä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼ˆæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„æ¦‚å¿µè¯·è‡ªè¡Œäº†è§£ï¼‰ã€‚ä¸‹é¢æ¥çœ‹ä¾‹å­å§ï¼ˆä»¥ä¸‹é—®é¢˜ä¸­ï¼Œæ‰€æœ‰æ•´æ•°éƒ½åœ¨32ä½æ•´å‹èŒƒå›´å†…ï¼‰ï¼š

### ä¸€ã€ç¼ºå°‘äº†è°ï¼Ÿ

é—®é¢˜ä¸€ï¼šæœ‰nä¸ªæ•° `nums`ï¼Œ`1 <= nums[i] <= n`ï¼Œæ— åºæ— é‡å¤ï¼Œè¢«æ‹¿æ‰äº†ä¸€ä¸ªï¼Œè¯·æ‰¾åˆ°è¢«æ‹¿æ‰çš„é‚£ä¸ªæ•°ï¼Œä¾‹å¦‚ï¼š

```c
nums = [2,6,4,3,1]; n = 6;
result: 5.
// 6ä¸ªæ•°ï¼š1-6ï¼Œè¢«æ‹¿æ‰çš„é‚£ä¸ªæ˜¯5ï¼Œæ‰€ä»¥ç»“æœå°±æ˜¯5ã€‚
```

è§£æ³•ï¼šç”¨ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼å¾—åˆ° n ä¸ªæ•°çš„å’Œï¼Œç„¶åæŠŠæ•°ç»„ä¸­çš„æ•°å­—æŒ¨ä¸ªå‡ä¸€éã€‚ç›´æ¥ä¸Šä»£ç ï¼š

```java
int findAbsence(int[] nums, int n) {
    if (nums == null || nums.length == 0) return -1;

    int sum = (1 + n) * n / 2;
    for (int i: nums) {
        sum -= i;
    }
    return sum;
}
```

çœ‹ä¸Šå»ä¹Ÿæ²¡æœ‰ä»€ä¹ˆéš¾åº¦å˜›ï¼è€Œä¸”æ­¤è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ï¼Œç®€ç›´å®Œç¾ã€‚

ä¸Šé¢çš„è§£æ³•å·²ç»æ˜¯è¿™é“é¢˜çš„æœ€ä¼˜è§£æ³•ï¼Œä½†æ˜¯å®ƒä¸å…·å¤‡é€šç”¨æ€§ï¼Œå‡å¦‚æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ä¸æ˜¯æŠ½æ‰ä¸€ä¸ªæ•°å­—è€Œæ˜¯ä¸¤ä¸ªå‘¢ï¼Ÿé‚£ä¹ˆä¸Šé¢çš„è§£æ³•å°±ä¸å…·å¤‡è§£å†³è¿™ä¸ªçš„é—®é¢˜çš„èƒ½åŠ›ã€‚

é—®é¢˜äºŒï¼šåœ¨é—®é¢˜ä¸€çš„åŸºç¡€ä¸Šï¼Œæ‰©å±•ä¸ºæ‹¿æ‰ä¸¤ä¸ªæ•°å­—æˆ–è€…æ›´å¤šæ•°å­—ï¼Œä¾‹å¦‚ï¼š

```c
nums = [2,6,4,1]; n = 6;
result: [3,5].
// 6ä¸ªæ•°ï¼š1-6ï¼Œè¢«æ‹¿æ‰çš„é‚£ä¸ªæ˜¯5ï¼Œæ‰€ä»¥ç»“æœå°±æ˜¯5ã€‚
```

å¾ˆæ˜¾ç„¶ï¼Œé—®é¢˜ä¸€çš„è§£æ³•æ˜¾ç„¶å·²ç»ä¸é€‚ç”¨äºç°åœ¨çš„é—®é¢˜äº†ï¼Œæœ‰çš„äººå¯èƒ½ä¼šæƒ³åˆ°å…ˆæ’åºï¼Œç„¶åæ¯”è¾ƒæ•°ç»„çš„ä¸‹æ ‡å’Œå¯¹åº”çš„å€¼ï¼Œå½“ç¬¬ä¸€æ¬¡å‡ºç°ä¸å¯¹åº”çš„æ—¶å€™å°±æ˜¯ç¼ºå°‘çš„å€¼ï¼ŒåŒæ ·çš„æ–¹æ³•å†æ‰¾åˆ°ç¬¬äºŒä¸ªï¼Œä½†æ˜¯æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N*lgN)ï¼Œè¯¥é¢˜ç›®å¯èƒ½è¿˜ä¼šæœ‰æ›´å¥½çš„è§£æ³•ã€‚

æ•£åˆ—æ³•ï¼ˆ[ä»€ä¹ˆæ˜¯æ•£åˆ—è¡¨](https://andyccc.github.io/2018/03/23/%E5%93%88%E5%B8%8C%E8%A1%A8/)ï¼‰ï¼Œå°†æ•°ç»„ä¸­çš„å€¼å…¨éƒ¨æ•£åˆ—åˆ° `Map` ä¸­ï¼Œç„¶åå°† 1 - n ä½œä¸ºé”®å» `Map` ä¸­æŸ¥æ‰¾ï¼ŒæŸ¥ä¸åˆ°çš„å³ä¸ºç¼ºå°‘çš„ã€‚ä»£ç ï¼š

```java
List<Integer> findAbsenceWithMap(int[] nums, int n) {
    if (nums == null || nums.length == 0) return null;
        
    List<Integer> list = new ArrayList<>();
    Map<Integer, Integer> map = new HashMap<>();
        
    for (int i: nums) {
        map.put(i, 1);
    }
        
    for (int i = 1; i <= n; ++i) {
    	if (map.get(i) == null) {
            list.add(i);
        }
    }
    return list;
}
```

æˆ‘ä»¬ç”¨äº† O(N) çš„ç©ºé—´å¤æ‚åº¦æ¢å–äº† O(lgN) çš„æ—¶é—´å¤æ‚åº¦ï¼ŒåŒæ—¶è¿™ç§è§£æ³•å¥½åƒæ›´å®¹æ˜“ç†è§£ä¸€äº›ã€‚

è¿™ç§è§£æ³• O(N) çš„æ—¶é—´å¤æ‚åº¦å½“ç„¶æ˜¯å»ºç«‹åœ¨å“ˆå¸Œè¡¨æ²¡æœ‰å“ˆå¸Œå†²çªçš„æƒ…å†µä¸‹ï¼Œå‡è®¾åœ¨æç«¯æƒ…å†µä¸‹å“ˆå¸Œè¡¨å®Œå…¨å†²çªï¼Œé‚£ä¹ˆè¯¥é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦å˜æˆäº† O(N^2)ï¼Œå¥½åƒè¿˜ä¸å¦‚æˆ‘ä»¬ç¬¬ä¸€æ¬¡æƒ³åˆ°çš„æ’åºç®—æ³•ï¼Œå½“ç„¶å“ˆå¸Œå®Œå…¨å†²çªçš„æƒ…å†µåŸºæœ¬ä¸Šä¸ä¼šå‡ºç°ï¼Œä½œè¿™ä¸ªå‡è®¾çš„ç›®çš„æ˜¯ä¸ºäº†å¼•å‡ºæ›´å¥½çš„è§£æ³•ï¼š

ç”³è¯·ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ•°ç»„çš„é•¿åº¦ä¸º nï¼Œå°† `nums` ä¸­çš„å€¼ä½œä¸ºä¸‹æ ‡ï¼Œå°† `nums` ä¸­çš„å†…å®¹æ•£åˆ—åˆ°æ–°çš„æ•°ç»„ï¼Œæ ‡è®°ä¸º 1ï¼Œæœ€åéå†ä¸€éæ–°æ•°ç»„ï¼Œæœªè¢«æ•£åˆ—çš„ä¸‹æ ‡å³ä¸ºæˆ‘ä»¬è¦æŸ¥æ‰¾çš„ç›®æ ‡ï¼š

```java
List<Integer> findAbsenceWithArray(int[] nums, int n) {
    if (nums == null || nums.length == 0) return null;

    List<Integer> list = new ArrayList<>();
    int[] temp = new int[n];
	
    // æ³¨æ„ï¼šæ•°ç»„çš„ä¸‹æ ‡ä» 0 å¼€å§‹
    for (int i: nums) {
        temp[i - 1] = 1;
    }

    for (int i = 0; i < n; ++i) {
        if (temp[i] == 0) {
            list.add(i + 1);
        }
    }
    return list;
}
```

è¿™æ ·å°±è§£å†³äº†å“ˆå¸Œè¡¨å“ˆå¸Œå†²çªçš„é—®é¢˜ï¼ŒåŒæ—¶åŸºç¡€ç±»å‹çš„æ•°ç»„è¦æ¯” `Map` è¿™ç§å°è£…ç±»å‹å¯¹å†…å­˜çš„æ¶ˆè€—å°‘å¾—å¤šã€‚

### äºŒã€å¤šäº†è°ï¼Ÿ

ç°åœ¨é—®é¢˜åˆå˜å¾—å¤æ‚äº†ï¼š

é—®é¢˜ä¸‰ï¼šä¾ç„¶æ˜¯ n ä¸ªæ•°ï¼Œæ¯ä¸ªæ•°çš„å¤§å°éƒ½å¤§äºç­‰äº1ï¼Œå°äºç­‰äº nï¼Œä½†æ˜¯æœ‰çš„æ•°è¢«æ‹¿æ‰äº†ï¼Œæœ‰çš„æ•°å‡ºç°äº†ä¸¤æ¬¡ï¼Œè¯·æ‰¾åˆ°å‡ºç°ä¸¤æ¬¡çš„æ•°ã€‚ä¾‹å¦‚ï¼š

```c
nums = [2,6,6,4,2,1]; n = 6;
result: [2,6].
// 2å’Œ6åˆ†åˆ«å‡ºç°äº†ä¸¤æ¬¡ï¼Œç¼ºå°‘äº†3å’Œ5ã€‚
```

ç»è¿‡å¯¹é—®é¢˜ä¸€å’Œé—®é¢˜äºŒçš„æ€è€ƒï¼Œæˆ‘ä»¬é©¬ä¸Šå°±æƒ³åˆ°äº†ï¼Œå°†æ‰€æœ‰æ•°ä»¥æ•°ä¸ºé”®ï¼Œä»¥å‡ºç°çš„æ¬¡æ•°ä¸ºå€¼æ•£åˆ—ä¸€éï¼Œæœ€åæ‰¾åˆ°å“ˆå¸Œè¡¨ä¸­å€¼ä¸º 2 çš„æ•°ï¼Œemmï¼Œæ˜¯ä¸ªå¥½è§£æ³•ï¼Œä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œæ­¤æ—¶å¾…å¤„ç†çš„æ•°ç»„è¿‡å¤§ï¼Œå·²ç»æ²¡æœ‰å¤šä½™çš„å†…å­˜ç»™ä½ ç”³è¯·ä¸€ä¸ªç›¸åŒå†…å­˜çš„æ•°ç»„æˆ–è€…å“ˆå¸Œè¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¿…é¡»è¦åœ¨ O(1) çš„ç©ºé—´å¤æ‚åº¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åŒæ—¶ï¼Œç”±äºå¾…å¤„ç†æ•°ç»„å¤ªå¤§ï¼Œæˆ‘ä»¬è®¾è®¡çš„ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸å®œè¿‡é«˜ã€‚

ç°åœ¨çœ‹ä¸Šå»è¿™ä¸ªé—®é¢˜æ˜¯æœ‰ç‚¹å˜æ€äº†ï¼Œä½†æ˜¯åˆç¡®ç¡®å®å®æ˜¯æˆ‘ä»¬åœ¨å·¥ä½œä¸­å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œå› ä¸º 4G å†…å­˜è£…æ»¡æ•´å½¢æ•°å­—ä¹Ÿå°± 10äº¿æ•°é‡çº§çš„æ•°å­—ï¼Œå¥½åƒå¹¶ä¸æ˜¯ç‰¹åˆ«å¤§ã€‚

å¥½åœ¨ï¼Œé¢˜ç›®å¹¶æ²¡æœ‰ä¸å…è®¸æˆ‘ä»¬ä¿®æ”¹åŸå§‹æ•°ç»„ï¼Œé¢˜å¹²ä¸­çš„ 1 - nï¼Œå¥½åƒä¹Ÿæ˜¯è§£é¢˜çš„å…³é”®æ‰€åœ¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±æƒ³åˆ°äº†åŸåœ°æ•£åˆ—çš„è§£æ³•ï¼Œä¹Ÿå°±æ˜¯ä»¥æ•°ç»„ä¸­çš„å€¼ä¸ºä¸‹æ ‡å†æ•£åˆ—è¯¥æ•°ç»„ï¼Œå°†è¯¥ä¸‹æ ‡ä¸‹çš„å€¼ä¹˜ä»¥ -1ï¼Œå½“éå†åˆ°æŸä¸ªä¸‹æ ‡çš„å€¼å°äº 0æ—¶ï¼Œåˆ™è¯¥ä¸‹æ ‡å‡ºç°ä¸¤æ¬¡ã€‚ä¾‹å¦‚ï¼š

```c
// åŸæ•°ç»„
key: 0 1 2 3 4 5
val: 2 6 6 4 2 1
// å°†ç¬¬ä¸€ä¸ª valï¼Œæ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªæ•°ä¹˜ä»¥-1
key: 0  1 2 3 4 5
val: 2 -6 6 4 2 1   
// å°†ç¬¬äºŒä¸ª valï¼Œæ•°ç»„ä¸­çš„ç¬¬å…­ä¸ªæ•°ä¹˜ä»¥-1
key: 0  1 2 3 4  5
val: 2 -6 6 4 2 -1 
/* éå†åˆ°ç¬¬ä¸‰ä¸ªvalï¼Œ6æ—¶ï¼Œå‘ç°æ•°ç»„ä¸­ç¬¬6ä¸ªæ•°ä¸ºè´Ÿæ•°ï¼Œè¯´æ˜6æ˜¯ç¬¬äºŒæ¬¡å‡ºç°ï¼Œ
 * å› æ­¤ï¼Œ6ä¸ºå‡ºç°ä¸¤æ¬¡çš„æ•°ï¼Œä¿å­˜6ã€‚
 * ç„¶åå°†ç¬¬6ä¸ªæ•°ä¹˜ä»¥-1ï¼Œé¿å…é‡å¤ï¼Œä»¥æ­¤ç±»æ¨ã€‚
 */
key: 0  1 2 3 4  5
val: 2 -6 6 4 2  1
```

ä»£ç ï¼š

```java
public List<Integer> findDuplicates(int[] nums) {
    List<Integer> list = new ArrayList<>();

    if (nums == null) return null;
    if (nums.length == 0) return list;

    for (int i = 0; i < nums.length; ++ i) {
        int index = Math.abs(nums[i]) - 1;
        if (nums[index] < 0) list.add(Math.abs(index + 1));

        nums[index] = -nums[index];
    }

    return list;
}
```

è¿™æ ·æˆ‘ä»¬å°±ç”¨ O(N) çš„æ—¶é—´å¤æ‚åº¦å’Œ O(1) çš„ç©ºé—´å¤æ‚åº¦è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚

ç»è¿‡ä¸Šé¢å‡ é“é¢˜ç›®çš„é”»ç‚¼ï¼Œæ„Ÿè§‰è‡ªå·±å¥½åƒæŒæ¡äº†è§£å†³è¿™ç§é—®é¢˜çš„å¥—è·¯äº†ï¼Œè‡ªä¿¡æ»¡æ»¡ã€‚æ”¾é©¬è¿‡æ¥å§ï¼ğŸ¤“ğŸ¤“

é—®é¢˜å››ï¼šè¿™æ¬¡ä¸å†æ˜¯ n ä¸ªæ•°äº†ï¼Œè€Œæ˜¯ n + 1 ä¸ªæ•°ï¼Œä»ç„¶æ˜¯å¤§äºç­‰äº1ï¼Œå°äºç­‰äº nï¼Œä½†æ˜¯è¿™å †æ•°é‡Œé¢å‡ºç°äº†ä¸€ä¸ªå¼‚ç±»ï¼Œå®ƒå‡ºç°äº†ä¸¤æ¬¡ï¼Œå¹¶ä¸”åªæœ‰å®ƒå‡ºç°äº†ä¸¤æ¬¡ï¼Œä¾‹å¦‚ï¼š

```c
nums = [2,5,1,1,4,3]; n = 5;
result: 1.
```

æ¡ä»¶ç»§æ‰¿è‡ªé—®é¢˜ä¸‰ï¼Œæ²¡æœ‰å¤šä½™çš„ç©ºé—´ç»™æˆ‘ä»¬ç”¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸å®œè¿‡é«˜ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼Œæ­¤æ—¶ä½ ä¸èƒ½å†ä¿®æ”¹æ•°ç»„äº†ã€‚

å‡å¦‚æ²¡æœ‰è¿™äº›æ¡ä»¶çš„è¯ï¼Œä¸Šé¢å‡ ä¸ªé—®é¢˜çš„è§£æ³•çœ‹èµ·æ¥å¥½åƒéƒ½èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„é“ºå«æ˜¯æœ‰ç”¨çš„ï¼Œä½†æ˜¯å‡å¦‚åŠ äº†è¿™äº›é™åˆ¶æ¡ä»¶ï¼Œä½ è¿˜èƒ½æƒ³åˆ°è§£æ³•å—ï¼Ÿè¦çŸ¥é“æ°¸è¿œä¸ä¼šå˜çš„æ˜¯å˜åŒ–ï¼Œä½ æ€ä¹ˆä¿è¯è‡ªå·±çš„èŒä¸šç”Ÿæ¶¯ä¸­ä¸ä¼šé‡åˆ°è¿™ç±»é—®é¢˜å’Œé™åˆ¶æ¡ä»¶å‘¢ï¼Ÿ

é‚£ä¹ˆç°åœ¨å°±å¼€å§‹è§£å†³å®ƒå§ï¼

æ•°ç»„ä¸­çš„å€¼åˆ†å¸ƒåœ¨ 1 ~ n ä¹‹é—´ï¼Œé™¤äº†æ•£åˆ—ï¼Œè¿˜èƒ½æƒ³åˆ°ä»€ä¹ˆæ•°æ®ç»“æ„èƒ½æ»¡è¶³è¿™ä¸ªæ¡ä»¶å‘¢ï¼Ÿç­”æ¡ˆæ˜¯é“¾è¡¨ã€‚ç”¨æ•°ç»„å®ç°çš„é“¾è¡¨ï¼Œå¬èµ·æ¥å¥½åƒæœ‰ç‚¹é™Œç”Ÿï¼Œé‚£å°±å»ç¿»ç¿»é‚£æœ¬å«æ•°æ®ç»“æ„ä¸ç®—æ³•çš„å¤§å­¦è¯¾æœ¬å§ï¼

é€šå¸¸æ•°ç»„éƒ½æ˜¯ä»¥ä¸‹æ ‡ 0 å¼€å§‹çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆå°† 1 ~ n è½¬åŒ–ä¸º 0 ~ nï¼š

```c
// åŸæ•°ç»„
key: 0 1 2 3 4 5
val: 2 5 1 1 4 3
// è½¬åŒ–å
key: 0 1 2 3 4 5
val: 1 4 0 0 3 2
```

ç°åœ¨çœ‹ä¸Šå»å¥½å¤šäº†ï¼Œæ•°ç»„ä¸­å­˜çš„å€¼å¯ä»¥å’Œä¸‹æ ‡å¯¹åº”äº†ï¼Œæˆ‘ä»¬å°†è½¬åŒ–åçš„æ•°ç»„å†™æˆé“¾è¡¨ï¼š

![](https://upload-images.jianshu.io/upload_images/5314152-35f2e93ad4eb0dfc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ˜¯ä¸æ˜¯çœ‹ä¸Šå»å¤§åƒä¸€æƒŠï¼Œè¿˜èƒ½è¿™æ ·ç©ï¼Ÿåˆ«ç€æ€¥ï¼Œå¥½æˆè¿˜åœ¨åé¢å‘¢ã€‚

ç°åœ¨çš„ç›®çš„æœ‰ç‚¹æ˜ç¡®äº†ï¼Œæˆ‘ä»¬è¦æ‰¾çš„å°±æ˜¯è¿™ä¸ªæœ‰ç¯çš„é“¾è¡¨çš„ç¯å¼€å§‹çš„åœ°æ–¹ï¼Œå°±æ˜¯é‚£ä¸ªç»“ç‚¹ 0ï¼Œå½“ç„¶å®ƒåœ¨åŸæ•°ç»„ä¸­çš„å¤§å°æ˜¯ 1ï¼Œå°†é“¾è¡¨ä¸­çš„æ¯ä¸ªç»“ç‚¹è½¬åŒ–ä¸ºåŸæ•°ç»„ä¸­çš„å€¼åªéœ€è¦å°†ä»–ä»¬çš„å¤§å°åŠ  1 è€Œå·²ï¼Œå°±åƒæˆ‘ä»¬å°†æ•°ç»„è½¬æ¢ä¸ºé“¾è¡¨çš„æ—¶å€™å‡ 1 ä¸€æ ·ã€‚

å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªç¯å¼€å§‹çš„ç»“ç‚¹ï¼Ÿå³ï¼Œå¦‚ä½•æ‰¾åˆ°é“¾è¡¨çš„ç¯å¼€å§‹çš„ç»“ç‚¹ï¼Ÿ

emmï¼ŒæŒ¨ä¸ªå°†æ¯ä¸ªç»“ç‚¹æ”¾å…¥ `Set`ï¼Œå½“ç¬¬ä¸€æ¬¡é‡åˆ°å­˜æ”¾å¤±è´¥ï¼Œå³ `Set` ä¸­å­˜åœ¨è¯¥ç»“ç‚¹çš„æ—¶å€™ï¼Œè¿™ä¸ªç»“ç‚¹å°±æ˜¯è¦æ‰¾çš„ç»“ç‚¹ã€‚æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œä½†æ˜¯ï¼Œæ˜¯ä¸æ˜¯å¿½ç•¥äº†æœ€åˆçš„é™åˆ¶æ¡ä»¶ï¼Ÿå³ä½¿ç°åœ¨å˜æˆé“¾è¡¨çš„ç»“æ„äº†ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¤šä½™çš„å†…å­˜å»ç”³è¯·ä¸€ä¸ª `Set`ã€‚

äº‹æƒ…å¥½åƒåˆé™·å…¥äº†ä¸€ä¸ªæ­»ç»“ã€‚

é‚£ä¹ˆä¸¤ä¸ªæŒ‡é’ˆå‘¢ï¼Ÿä¸€ä¸ªä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œä¸€ä¸ªä¸€æ¬¡èµ°ä¸¤æ­¥ï¼Œå½“èµ°çš„å¿«çš„æŒ‡é’ˆè¿½ä¸Šèµ°çš„æ…¢çš„æŒ‡é’ˆçš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å°±è¯´æ˜é“¾è¡¨æœ‰ç¯ï¼Ÿ

é¦–å…ˆæˆ‘ä»¬å‡è®¾é“¾è¡¨æœ‰ç¯ï¼Œå¹¶ä¸”ä¸¤ä¸ªæŒ‡é’ˆèƒ½ç›¸é‡ï¼Œå¹¶ä¸”åœ¨æ…¢æŒ‡é’ˆèµ°äº† k æ­¥åç›¸é‡ï¼Œæ­¤æ—¶å¿«æŒ‡é’ˆèµ°äº† 2k æ­¥ï¼Œé‚£ä¹ˆå¿«æŒ‡é’ˆæ¯”æ…¢æŒ‡é’ˆèµ°çš„å¤šçš„æ­¥æ•°å°±æ˜¯ç¯çš„é•¿åº¦ä¹˜ä»¥å¾ªç¯çš„æ¬¡æ•°ã€‚å‡è®¾ç¯çš„é•¿åº¦ä¸º rï¼Œå¿«æŒ‡é’ˆå¾ªç¯ n æ¬¡ç›¸é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾—åˆ°ç»“æœï¼š2k - k = nrï¼Œå› æ­¤å½“ n æ»¡è¶³ k = nr æ—¶ï¼Œä¸¤ä¸ªæŒ‡é’ˆç›¸é‡ï¼Œè¯æ˜äº†æˆ‘ä»¬çš„å‡è®¾ã€‚çœ‹æ¥è¿™ä¸ªåŠæ³•æ˜¯è¡Œå¾—é€šçš„ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ä¿è¯æ­¤æ—¶ç›¸é‡çš„ç»“ç‚¹å³ä¸ºç¯å¼€å§‹çš„ç»“ç‚¹ï¼Œåªèƒ½è¯æ˜å®ƒä»¬ä¼šåœ¨æŸå¤„ç›¸é‡è€Œå·²ï¼Œå³åªèƒ½è¯æ˜é“¾è¡¨æœ‰ç¯ã€‚

é‚£ä¹ˆç¯å¼€å§‹çš„ç»“ç‚¹åœ¨å“ªå‘¢ï¼Ÿ

![](https://upload-images.jianshu.io/upload_images/5314152-46acf9b80dc1d072.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šç»§ç»­æ¨å¯¼ï¼Œå¦‚ä¸Šå›¾ï¼Œè®¾é“¾è¡¨çš„å¤´ç»“ç‚¹ä¸ºç¬¬ 0 æ­¥ï¼Œç¯çš„æ–¹å‘ä¸ºé€†æ—¶é’ˆæ–¹å‘ï¼Œç¯å¼€å§‹çš„ç»“ç‚¹åˆ°å¤´ç»“ç‚¹çš„è·ç¦»ä¸º m æ­¥ï¼Œå¿«æ…¢æŒ‡é’ˆç›¸é‡çš„ç»“ç‚¹åˆ°å¤´ç»“ç‚¹çš„è·ç¦»ä¸º k æ­¥ï¼Œm åˆ° k çš„è·ç¦»ä¸º s æ­¥ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯å¾—åˆ°ï¼šs = k - mï¼Œå³ï¼Œs = nr - mï¼Œå³ s = (n - 1)r + r - mï¼Œå½“ n = 1æ—¶ï¼Œs = r - mï¼Œå³ m = r - sã€‚ä¹Ÿå°±æ˜¯é€†æ—¶é’ˆæ–¹å‘ k åˆ° m çš„è·ç¦»ç­‰äºå¤´ç»“ç‚¹åˆ°ç¯å¼€å§‹çš„ç»“ç‚¹çš„è·ç¦»ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è®©å¿«æŒ‡é’ˆé‡æ–°å›åˆ°å¤´ç»“ç‚¹ï¼Œæ…¢æŒ‡é’ˆä»ç„¶åœ¨ç›¸é‡ç»“ç‚¹ï¼Œä¸¤ä¸ªæŒ‡é’ˆéƒ½ä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå®ƒä»¬ç›¸é‡çš„ç»“ç‚¹å³ä¸ºæˆ‘ä»¬è¦æ‰¾çš„ç»“ç‚¹ã€‚

**Talk is cheap, show you the code**:

```java
public int findDuplicate(int[] nums) {
    if (nums == null || nums.length == 0) return -1;
    /* ä¸ç”¨åˆ»æ„çš„å»å¯»æ‰¾å¤´ç»“ç‚¹
     * å³ä½¿ä¸Šè¿°æ¨è®ºä¸­ m = 0ï¼Œä¹Ÿèƒ½å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚
     */
    int slow = nums.length, fast = nums.length;

    // å› ä¸ºéƒ½æ˜¯ä»å¤´ç»“ç‚¹å¼€å§‹çš„ï¼Œæ‰€ä»¥å¿½ç•¥ç¬¬ä¸€æ­¥åˆ¤æ–­
    do {
        slow = nums[slow - 1];
        fast = nums[nums[fast - 1] - 1];
    } while (slow != fast);

    slow = nums.length;
    while (slow != fast) {
        slow = nums[slow - 1];
        fast = nums[fast - 1];
    }

    return slow;
}
```

æƒ³ä¸åˆ°å§ï¼Œä¸€ä¸ªå¤æ‚çš„é—®é¢˜å±…ç„¶å¯ä»¥ç”¨è¿™ä¹ˆå°‘çš„ä»£ç å°±è§£å†³äº†ï¼Œæ‰€ä»¥ï¼Œç®—æ³•çš„ä¼˜åŠ¿æ˜¾è€Œæ˜“è§ï¼Œå¦‚æœæ­¤æ—¶ä½ è¿˜åšæŒç®—æ³•æ— ç”¨è®ºçš„è¯ï¼Œé‚£ä¹ˆä¸‹é¢è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ

### ä¸‰ã€è°æ˜¯å•èº«ç‹—ï¼Ÿ

é—®é¢˜äº”ï¼šç°åœ¨æƒ…å†µåˆæœ‰äº›ä¸åŒäº†ï¼Œä½ é‡åˆ°çš„é—®é¢˜ä¸å†æ˜¯ 1 ~ n ä¹‹é—´çš„æ•°å­—äº†ï¼Œå˜æˆäº†ä»»æ„æ•´æ•°ï¼Œä½†æ˜¯è¿™äº›æ•°ä¸­åªæœ‰ä¸€ä¸ªå°ä¼™ä¼´åªå‡ºç°äº†ä¸€æ¬¡ï¼Œå…¶ä»–å°ä¼™ä¼´éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼ŒåŒæ ·ä½ æ²¡æœ‰å¤šä½™çš„å†…å­˜å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯åˆ«æƒ³ `Map` `Set` ç­‰æ•°æ®ç»“æ„ä¼šæ¥å¸®ä½ ï¼Œå¦‚æœè®¤ä¸ºæ’åºæ˜¯ä¸ªå¥½åŠæ³•çš„è¯ï¼Œä¸å¥½æ„æ€ï¼Œæˆ‘ä»¬æœ€å¥½å°†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ§åˆ¶åœ¨çº¿æ€§æ—¶é—´å¤æ‚åº¦ä¹‹å†…ï¼Œå› ä¸ºè¿™ä¸ªæ•°æ®é‡å¯èƒ½ä¼šè¶…å‡ºä½ æ‰€èƒ½æƒ³è±¡çš„å¤§å°ï¼Œå¹¶ä¸”é™¤äº†æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¿®æ”¹åŸæ•°ç»„ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£é¢˜ä¹ æƒ¯ã€‚

è€ƒéªŒåŸºç¡€ç‰¢å›ºä¸ç‰¢å›ºçš„æ—¶å€™åˆ°äº†ï¼Œå½“æˆ‘ä»¬æŠŠä¸€ä¸ªæ•°å­—è½¬æ¢æˆäºŒè¿›åˆ¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¯¹å®ƒè¿›è¡Œä½æ“ä½œï¼Œæ¯”å¦‚æŒ‰ä½æˆ–ã€æŒ‰ä½ä¸ã€æŒ‰ä½å¼‚æˆ–ã€å·¦ç§»ã€å³ç§»ç­‰ç­‰ã€‚æ¯”å¦‚ï¼š

```c
 3: 0 1 1
 5: 1 0 1
 &  0 0 1 // ä¸
 |  1 1 1 // æˆ–
 ^  1 1 0 // å¼‚æˆ–
```

é‚£ä¹ˆå½“ä¸¤ä¸ªæ•°ç›¸ç­‰æ—¶ï¼Œä»–ä»¬çš„ä½æ“ä½œçš„ç»“æœå‘¢ï¼Ÿ

```c
 3: 0 1 1
 3: 0 1 1
 &  0 1 1 // ä¸
 |  0 1 1 // æˆ–
 ^  0 0 0 // å¼‚æˆ–
```

é—®é¢˜å¥½åƒæœ‰ç‚¹çœ‰ç›®äº†ï¼Œä¸¤ä¸ªç›¸ç­‰çš„æ•°å¼‚æˆ–çš„ç»“æœå°±æ˜¯ 0ï¼Œæˆ‘ä»¬æƒ³ä¸€ä¸‹å°±èƒ½çŸ¥é“ï¼Œ0 ä¸ä»»ä½•æ•°å¼‚æˆ–çš„ç»“æœéƒ½æ˜¯ä»»ä½•æ•°ï¼Œå› æ­¤ï¼Œ`3 ^ 3 ^ 5 = 5`ã€‚æœ‰äº†è¿™ä¸ªç»“æœï¼Œé‚£ä¹ˆå†™ä»£ç å§ï¼ˆå‡å®šæ•°ç»„éç©ºï¼‰ï¼š

```java
public int findSingle(int[] nums) {

    int res = 0;
    for (int i: nums) {
        res ^= i;
    }
    return res;
}
```

è¯·é—®ä½ ç°åœ¨è¿˜æŠ±ç€ç®—æ³•æ— ç”¨è®ºçš„å¿ƒç†å—ï¼Ÿï¼Ÿ

### å†™åœ¨æœ€åçš„è¯

å¤šä½™çš„è¯å°±ä¸ç”¨å†è¯´äº†ï¼Œç®—æ³•çš„å­˜åœ¨ä¸åœ¨äºè§£é¢˜ï¼Œè€Œåœ¨äºé”»ç‚¼è¿™ç§è§£é¢˜çš„æ€ç»´ã€‚

å¦å¤–ï¼Œå¦‚æœä½ ä¹Ÿå¯¹ç®—æ³•æœ‰å…´è¶£çš„è¯ï¼Œæ¥ä½“éªŒè§£é¢˜çš„å¿«æ„Ÿå§ï¼š [LeetCode](https://leetcode.com/problemset/all/)ï¼Œ[è¿™é‡Œ](https://github.com/andyccc/LeetCode) æœ‰æˆ‘è§£çš„ä¸€éƒ¨åˆ†é—®é¢˜çš„ Java å®ç°ï¼Œæœ‰äº›å¯èƒ½ä¸æ˜¯æœ€ä¼˜è§£ï¼ŒæŒ‰é¢˜ç›®ç±»å‹åˆ†ç±»ï¼Œç”¨é¢˜ç›®çš„ title æœç´¢ä¹Ÿèƒ½æ‰¾åˆ°å“¦ã€‚
